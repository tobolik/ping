<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üèì Ping Pong Turnaje</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
        html, body { height: 100%; margin: 0; padding: 0; }
        body { font-family: 'Inter', sans-serif; background-color: #f3f4f6; }
        .screen { display: none; }
        .screen.active { display: block; }
        #app { height: 100%; }
        .modal-backdrop {
            position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            background-color: rgba(0,0,0,0.6);
            display: flex; align-items: center; justify-content: center; z-index: 50;
        }
        .modal-content {
            background: white; padding: 1.5rem; border-radius: 0.75rem;
            width: 95vw; max-width: 500px; max-height: 90vh; overflow-y: auto;
        }
        .modal-content.modal-lg { max-width: 800px; }
        .btn {
            display: inline-block; padding: 0.75rem 1.5rem; border-radius: 0.5rem;
            font-weight: 600; text-align: center; cursor: pointer;
            transition: all 0.2s; white-space: nowrap;
        }
        .btn:disabled { background-color: #d1d5db; cursor: not-allowed; color: #6b7280; }
        .btn-primary { background-color: #22c55e; color: white; }
        .btn-primary:hover:not(:disabled) { background-color: #16a34a; }
        .btn-secondary { background-color: #e5e7eb; color: #374151; }
        .btn-secondary:hover:not(:disabled) { background-color: #d1d5db; }
        .btn-danger { background-color: #ef4444; color: white; }
        .btn-danger:hover:not(:disabled) { background-color: #dc2626; }
        .player-score-box.active-pointer:active { transform: scale(0.99); }
        .autocomplete-suggestions {
            position: absolute; background: white; border: 1px solid #d1d5db;
            border-radius: 0 0 0.5rem 0.5rem; z-index: 100; max-height: 150px; 
            overflow-y: auto; left: 0; right: 0;
        }
        .autocomplete-suggestion { padding: 0.5rem 1rem; cursor: pointer; }
        .autocomplete-suggestion.highlighted { background-color: #f3f4f6; }
        .settings-menu {
            position: absolute; right: 0; top: calc(100% + 0.5rem);
            background-color: white; border-radius: 0.5rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1); z-index: 40; overflow: hidden;
        }
        .settings-menu button, .settings-menu label {
            display: block; width: 100%; padding: 0.75rem 1.5rem;
            text-align: left; white-space: nowrap;
        }
        .settings-menu button:hover, .settings-menu label:hover { background-color: #f3f4f6; }
        #sound-toggle:checked ~ .toggle-checkbox { background-color: #22c55e; }
        #sound-toggle:checked ~ .toggle-checkbox .toggle-label { transform: translateX(100%); }
        .loading-overlay {
            position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            background-color: rgba(0,0,0,0.5); display: flex;
            align-items: center; justify-content: center; z-index: 100;
        }
        .spinner {
            border: 4px solid #f3f4f6; border-top: 4px solid #22c55e;
            border-radius: 50%; width: 40px; height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        @media (max-width: 768px) {
            body.game-active, body.game-active #app { 
                padding: 0; margin: 0; max-width: 100vw; height: 100vh; overflow: hidden; 
            }
            body.game-active #game-screen { height: 100%; }
        }
    </style>
</head>
<body class="text-gray-800">
    <div id="loading" class="loading-overlay" style="display: none;">
        <div class="spinner"></div>
    </div>

    <div id="app" class="max-w-xl mx-auto p-4">
        <div id="main-screen" class="screen space-y-6">
            <header class="flex justify-between items-center flex-wrap gap-4">
                <h1 class="text-3xl font-bold flex items-center gap-3">
                    <i class="fa-solid fa-trophy text-yellow-400"></i>Ping Pong Turnaje
                </h1>
                <div class="flex items-center gap-2">
                    <button data-action="show-new-tournament-modal" class="btn btn-primary flex items-center gap-2">
                        <i class="fa-solid fa-plus"></i> Nov√Ω Turnaj
                    </button>
                    <div class="relative">
                        <button data-action="toggle-settings-menu" class="btn btn-secondary !p-0 h-12 w-12 flex items-center justify-center text-xl">
                            <i class="fa-solid fa-gear"></i>
                        </button>
                        <div id="settings-menu" class="settings-menu hidden">
                            <button data-action="show-player-db">
                                <i class="fa-solid fa-database w-6 mr-2"></i>Spr√°va hr√°ƒç≈Ø
                            </button>
                            <button data-action="show-overall-stats">
                                <i class="fa-solid fa-chart-line w-6 mr-2"></i>Celkov√© statistiky
                            </button>
                            <label for="sound-toggle" class="cursor-pointer flex items-center justify-between">
                                <span class="flex items-center">
                                    <i class="fa-solid fa-volume-high w-6 mr-2"></i>Zvuky
                                </span>
                                <input type="checkbox" id="sound-toggle" data-action="toggle-sound" class="sr-only">
                                <div class="relative w-10 h-5 bg-gray-300 rounded-full transition-colors toggle-checkbox">
                                    <div class="absolute left-0 top-0 w-5 h-5 bg-white rounded-full shadow transform transition-transform toggle-label"></div>
                                </div>
                            </label>
                        </div>
                    </div>
                </div>
            </header>
            <main id="tournaments-list-container" class="space-y-4"></main>
        </div>

        <div id="player-db-screen" class="screen space-y-6">
            <header>
                <h1 class="text-3xl font-bold">Datab√°ze hr√°ƒç≈Ø</h1>
                <p class="text-gray-500">Zde spravujete centr√°ln√≠ seznam v≈°ech hr√°ƒç≈Ø.</p>
            </header>
            <div class="flex gap-2">
                <button data-action="show-edit-player-modal" data-id="new" class="btn btn-primary w-full">
                    <i class="fa-solid fa-plus mr-2"></i>P≈ôidat nov√©ho hr√°ƒçe
                </button>
                <button data-action="back-to-main" class="btn btn-secondary w-full">Zpƒõt</button>
            </div>
            <main id="player-db-list-container" class="space-y-2"></main>
        </div>

        <div id="tournament-screen" class="screen space-y-6">
            <header>
                <div id="tournament-title" class="text-3xl font-bold"></div>
                <p id="tournament-progress" class="text-gray-500"></p>
            </header>
            <div class="flex items-center gap-2">
                <button data-action="back-to-main" class="btn btn-secondary flex items-center justify-center gap-2">
                    <i class="fa-solid fa-list-ul"></i> Turnaje
                </button>
                <button data-action="show-stats" class="btn btn-secondary flex items-center justify-center gap-2">
                    <i class="fa-solid fa-chart-simple"></i> Statistiky
                </button>
            </div>
            <main class="space-y-6">
                <div id="final-results-container"></div>
                <div id="upcoming-matches-container"></div>
                <div id="completed-matches-container"></div>
            </main>
        </div>

        <div id="game-screen" class="screen"></div>

        <div id="stats-screen" class="screen space-y-6">
            <header>
                <h1 class="text-3xl font-bold">V√Ωsledkov√° listina</h1>
                <p id="stats-tournament-name" class="text-gray-500"></p>
            </header>
            <button data-action="back-to-tournament" class="btn btn-secondary w-full">Zpƒõt</button>
            <div id="stats-leaderboard" class="bg-white p-4 rounded-xl shadow-sm"></div>
            <div class="space-y-2">
                <h2 class="text-xl font-bold">Vz√°jemn√© z√°pasy</h2>
                <div id="stats-matrix" class="bg-white p-4 rounded-xl shadow-sm overflow-x-auto"></div>
            </div>
        </div>

        <div id="overall-stats-screen" class="screen space-y-6">
            <header><h1 class="text-3xl font-bold">Celkov√© statistiky hr√°ƒç≈Ø</h1></header>
            <button data-action="back-to-main" class="btn btn-secondary w-full">Zpƒõt</button>
            <div id="overall-stats-container" class="bg-white p-4 rounded-xl shadow-sm overflow-x-auto"></div>
        </div>

        <div id="modals-container"></div>
    </div>

<script src="app.js"></script>
</body>
</html>